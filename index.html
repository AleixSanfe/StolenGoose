<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>Hello World!</title>

		<link rel="stylesheet" type="text/css" href="./assets/styles/goose.css">
	</head>
	<body>
		
		<div class="container">
			<div class="image">
				<h4 class="state"> GOOSE </h4>
			</div>
		</div>
		<script>
			// You can also require other files to run in this process
			//require('./renderer.js');
			const {BrowserWindow} = require('electron').remote;

			const sendNotification = () => {
				return new Notification('Goose Alert', {
					body: "I have been stolen !!!",
					icon: 'https://upload.wikimedia.org/wikipedia/commons/thumb/0/04/Kanadische_Wildgans_%285747228780%29.jpg/220px-Kanadische_Wildgans_%285747228780%29.jpg'
				});
			}

			console.log(BrowserWindow);
			const win = BrowserWindow.getFocusedWindow();
			
			sendNotification();

			//***

			var btSerial = new (require('bluetooth-serial-port')).BluetoothSerialPort();

			btSerial.on('found', function(address, name) {
				btSerial.findSerialPortChannel(address, function(channel) {
					btSerial.connect(address, channel, function() {
						console.log('connected');

						btSerial.write(new Buffer('my data', 'utf-8'), function(err, bytesWritten) {
							if (err) console.log(err);
						});

						btSerial.on('data', function(buffer) {
							console.log(buffer.toString('utf-8'));
						});
					}, function () {
						console.log('cannot connect');
					});

					// close the connection when you're ready
					btSerial.close();
				}, function() {
					console.log('found nothing');
				});
			});

			btSerial.inquire();
				
		</script>
	</body>
</html>
